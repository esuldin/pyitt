name: CI

on:
  pull_request:
    branches: [ "main" ]

jobs:
  github-context:
    runs-on: ubuntu-latest
    steps:
      - name: Dump github context
        run: echo "$GITHUB_CONTEXT"
        shell: bash
        env:
          GITHUB_CONTEXT: ${{ toJson(github) }}
  ci:
    uses: ./.github/workflows/ci.yml
  dependabot-auto-approve:
    uses: ./.github/workflows/dependabot-auto-approve.yml
    if: github.event.pull_request.user.login == 'dependabot[bot]'
    needs: [ci]
    permissions:
      contents: write
      pull-requests: write
